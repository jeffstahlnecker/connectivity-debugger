---
description: 
globs: 
alwaysApply: true
---
cursor.rules:
  general:
    cursor.must_follow_test_driven_development: true
    cursor.must_maintain_code_modularity: true
    cursor.must_keep_ui_and_logic_separate: true
    cursor.must_format_code_with_dart_format: true
    cursor.must_follow_effective_dart_guidelines: true

  architecture:
    cursor.must_place_code_in_appropriate_layer: true
    cursor.directory_structure:
      - lib/screens
      - lib/services
      - lib/models
      - lib/data
      - lib/utils
      - tests/

  tdd:
    cursor.must_write_tests_before_code: true
    cursor.must_write_unit_tests_for_all_services: true
    cursor.must_use_mocking_framework_for_dependencies: true
    cursor.must_write_widget_tests_for_ui_components: true
    cursor.must_validate_core_flows_with_integration_tests: true
    cursor.test_coverage_threshold: 80

  state_management:
    cursor.must_use_lightweight_state_management: true
    cursor.preferred_state_management:
      - provider
      - ValueNotifier
    cursor.must_not_use_unjustified_bloc_or_riverpod: true

  ui_practices:
    cursor.must_use_statelesswidget_when_possible: true
    cursor.must_assign_keys_to_stateful_widgets: true
    cursor.must_break_down_large_widgets: true

  navigation:
    cursor.must_use_named_routes_or_navigator_1_0: true
    cursor.must_avoid_custom_pageroute_logic_unless_necessary: true

  logging:
    cursor.must_use_logger_package_for_logs: true
    cursor.must_capture_failures_consistently: true

  security:
    cursor.must_request_permissions_just_in_time: true
    cursor.must_document_permissions: true
    cursor.must_not_store_credentials_unencrypted: true
    cursor.must_use_flutter_secure_storage_for_tokens: true

  anti_patterns:
    cursor.must_not_put_business_logic_in_ui: true
    cursor.must_not_use_global_mutable_state: true
    cursor.must_not_use_hardcoded_strings: true
    cursor.must_not_allow_test_coverage_below_threshold: true
    cursor.must_not_schedule_unscoped_background_tasks: true

  ci_cd:
    cursor.must_pass_flutter_test: true
    cursor.must_pass_dart_analyze: true
    cursor.must_run_dart_format_check: true
    cursor.optional_github_actions: flutter_ci_template